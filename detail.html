<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Plus+Jakarta+Sans%3Awght%40400%3B500%3B700%3B800"
    />

    <title>Stitch Design</title> <!-- This could also be dynamic based on image title -->
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body>
    <div
      class="relative flex size-full min-h-screen flex-col bg-white justify-between group/design-root overflow-x-hidden"
      style='font-family: "Plus Jakarta Sans", "Noto Sans", sans-serif;'
    >
      <div>
        <div class="flex items-center bg-white p-4 pb-2 justify-between">
          <a href="gallery.html">
            <div class="text-[#161412] flex size-12 shrink-0 items-center" data-icon="ArrowLeft" data-size="24px" data-weight="regular">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M224,128a8,8,0,0,1-8,8H59.31l58.35,58.34a8,8,0,0,1-11.32,11.32l-72-72a8,8,0,0,1,0-11.32l72-72a8,8,0,0,1,11.32,11.32L59.31,120H216A8,8,0,0,1,224,128Z"></path>
              </svg>
            </div>
          </a>
          <h2 id="imageDetailTitle" class="text-[#161412] text-lg font-bold leading-tight tracking-[-0.015em] flex-1 text-center">Whiskers</h2>
          <div class="flex w-12 items-center justify-end">
            <button
              class="flex max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-12 bg-transparent text-[#161412] gap-2 text-base font-bold leading-normal tracking-[0.015em] min-w-0 p-0"
            >
              <div class="text-[#161412]" data-icon="DotsThreeVertical" data-size="24px" data-weight="regular">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                  <path d="M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128ZM128,72a12,12,0,1,0-12-12A12,12,0,0,0,128,72Zm0,112a12,12,0,1,0,12,12A12,12,0,0,0,128,184Z"></path>
                </svg>
              </div>
            </button>
          </div>
        </div>
        <div class="flex w-full grow bg-white @container py-3">
          <div class="w-full gap-1 overflow-hidden bg-white @[480px]:gap-2 aspect-[3/2] flex">
            <div
              id="mainImageDisplay"
              class="w-full bg-center bg-no-repeat bg-cover aspect-auto rounded-none flex-1"
              style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDrPzOnbptq9a49_FCADeOPpNKRBrfBvgdoruclYHhI2zx0yuDzPNK_knZjfmIyUSrmtdrYdctCL9MNIOs3dk7nW2VslqAyRRmbtonGpgHt_MldbcdfZhPbTs9PE1tgvQGuzg9zEn96Ss9-gw_8yPw2T3_-NfHsNGjk_t9Oehf3BZV8-E7DavaUf8PxalyQWQyo4NEqarYN3Jv7aJAQKu1qGnKPNGFr8tGKlh-9W9tUVNDbn7v8ZscUKl_4tsZioYdNcWeKkefoTY77");'
            ></div>
          </div>
        </div>
        <div class="flex overflow-y-auto [-ms-scrollbar-style:none] [scrollbar-width:none] [&amp;::-webkit-scrollbar]:hidden">
          <div class="flex items-stretch p-4 gap-3">
            <div class="flex h-full flex-1 flex-col gap-4 rounded-lg min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl flex flex-col"
                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuDwuJQKqwxhRZXD5SHJ2_JxKNT4TtQKSGhmvK4dXuAyiTtYavddxx_nGuNvHjWipXmGVk4XGWTsGUXgWrR2P3kvOY2sH-dscl7aFmCwc4c4h5gaRyH0zY-z0RbPS1KCb1ywFVDafyGarjTiu_mAJrfgfIKnwYYDqwVFahatZ6fN0VADFniTBa_bR1Hlsse8mmw-D9syL3oC05PIWLFWbk6mgBeggf9UliVchbtM2jxXSr7ecvW6FP7FCBi8Krz70Z1yXxAlZYVybU4w");'
              ></div>
            </div>
            <div class="flex h-full flex-1 flex-col gap-4 rounded-lg min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl flex flex-col"
                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBoHZy3DrrlbVLLxlXUUGxULf4yONxIJ2PEV5bWLC_i1V9y-Mwg6_3B982d3cu48Q_aTJLCYAZwzYITLh-ylXk-e7h_0_uLROqQNHMgVgxuwb5XT74DTDm77MwVxaPaDPHiBt9mjphNiL6xG0LttxzfW-wEqK86exuqACBBP4rGUIAvntoFZitXvC5XJiOuQ1GjQFasbuZNPF1zxIrs8kLBXpR_bcCe0SdnqVXZJ4bY_7VNn0OpI6ON4MTZFLBbMrzdZkSc7rlgDeOf");'
              ></div>
            </div>
            <div class="flex h-full flex-1 flex-col gap-4 rounded-lg min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl flex flex-col"
                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBq3tRjkWMF2jsWtSrOZqEJWNyNJ429SPMy0SjGuPYZmJCw3iP1v1aTQmo9BAcH-5Vl-5FMSzaY1PC0MnmB6inSzZZOkoqVnQMauxbETufR9WNJTrYpEnknTfd4L2KfjhXwubTGT20zWslXZnqoIhtGcpS5z4aAPHe-voEBgy8Ps8InqgMdVpdWrdDmSkbO5w465LeqhiNs3wQQGkxJC3K0JCYn6vsTQVVU6mJ_uPLIHaa9_sfMnNENVOQYMUs6oF6y7VBgCe9giOXV");'
              ></div>
            </div>
            <div class="flex h-full flex-1 flex-col gap-4 rounded-lg min-w-40">
              <div
                class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-xl flex flex-col"
                style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuC_ZbXRD1nDASP0mSn90bkF1rfzWl5WY0h6vFuTeXA2TBsS7Up2VPfiJeyeWL8JD19O-xJhvXxpX23-N9AG7Nxn7VwUgcruyVBcfHXLYnbmf546rJWKiSlAGkX19KPyykYz0xCE4OQti3tJYGy7DD3vbu4faQJPlxeR83isJ0ybqBnnZ2pSsVAPPDNU5ESnfVQkuf19dmsjpNEoNKuDPVtTBf6oQHwHYEPzi9jwIq_p8IlDb6GZl4ot4XMvnuDro0u1qqFZs2bFedD3");'
              ></div>
            </div>
          </div>
        </div>
        <div class="flex flex-wrap gap-4 px-4 py-2 py-2">
          <div class="flex items-center justify-center gap-2 px-3 py-2">
            <div class="text-[#81766a]" data-icon="Heart" data-size="24px" data-weight="regular">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                <path
                  d="M178,32c-20.65,0-38.73,8.88-50,23.89C116.73,40.88,98.65,32,78,32A62.07,62.07,0,0,0,16,94c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,220.66,240,164,240,94A62.07,62.07,0,0,0,178,32ZM128,206.8C109.74,196.16,32,147.69,32,94A46.06,46.06,0,0,1,78,48c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,147.61,146.24,196.15,128,206.8Z"
                ></path>
              </svg>
            </div>
            <p class="text-[#81766a] text-[13px] font-bold leading-normal tracking-[0.015em]">123</p>
          </div>
        </div>
        <div id="comment-input-section" class="flex max-w-[480px] flex-wrap items-end gap-4 px-4 py-3">
          <label class="flex flex-col min-w-40 flex-1">
            <input
              placeholder="Add a comment"
              class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#161412] focus:outline-0 focus:ring-0 border border-[#e3e1dd] bg-white focus:border-[#e3e1dd] h-14 placeholder:text-[#81766a] p-[15px] text-base font-normal leading-normal"
              value=""
            />
          </label>
        </div>
        <h3 id="comments-header" class="text-[#161412] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4">Comments</h3>
        <div id="comments-list">
          <div class="flex w-full flex-row items-start justify-start gap-3 p-4">
            <div
              class="bg-center bg-no-repeat aspect-square bg-cover rounded-full w-10 shrink-0"
            style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuAaXzBC1TaVJNYhhASf2QOyEXQeFHYOVjNCElWp7D3iEiExizebY7kT5VdLurUgc1zYKaTKJyoQJRV75Jbi3oOfBZkkElP_3G0Tpa7W5LZvTE4y7FyqJ1pgJFnI3pcJOKEPboVQvoQHeBlRgkawz9nCPZhjMU13A8bcCtRFQvdexj7q7xsTgWzwxJlh5lI-ItHCMiGE4HcozsVFqTE9d1PqTXsRQ2-jyx3L51d2bgenCjkvy6v0qhNZw1LQmuv9KXkIrDKkNEZS4txn");'
          ></div>
          <div class="flex h-full flex-1 flex-col items-start justify-start">
            <div class="flex w-full flex-row items-start justify-start gap-x-3">
              <p class="text-[#161412] text-sm font-bold leading-normal tracking-[0.015em]">Olivia</p>
              <p class="text-[#81766a] text-sm font-normal leading-normal">2d</p>
            </div>
            <p class="text-[#161412] text-sm font-normal leading-normal">So cute!</p>
          </div>
        </div>
        <div class="flex w-full flex-row items-start justify-start gap-3 p-4">
          <div
            class="bg-center bg-no-repeat aspect-square bg-cover rounded-full w-10 shrink-0"
            style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBcOzgVrdBZo7o0XcEis_m-ARzuANU8FP9EfXS0khLM5BL1eKZgFlOUIkj7LhDx3IWhzJlNK96bD53nkj3oxMZILP2N88C3ENww9A84BvEJezOif3untMLuh7tMkmybyUQcWcSzEUfpH_HQqBimlreVkRIjkkUDrl35zBOyAXoNXY46YMxnudbp-BQofrldqJTauNB_yZnHl_P2DdkwZHYj5lzFeflQ4ccVSfvBPHMdzk7ZEJS_LI3R509heSozBTOE6D5GMJGW0G3W");'
          ></div>
          <div class="flex h-full flex-1 flex-col items-start justify-start">
            <div class="flex w-full flex-row items-start justify-start gap-x-3">
              <p class="text-[#161412] text-sm font-bold leading-normal tracking-[0.015em]">Noah</p>
              <p class="text-[#81766a] text-sm font-normal leading-normal">1d</p>
            </div>
            <p class="text-[#161412] text-sm font-normal leading-normal">I love cats!</p>
          </div>
        </div>
        </div>
      </div>
      <div>
        <div class="flex gap-2 border-t border-[#f4f2f1] bg-white px-4 pb-3 pt-2">
          <a class="just flex flex-1 flex-col items-center justify-end gap-1 rounded-full text-[#161412]" href="gallery.html">
            <div class="text-[#161412] flex h-8 items-center justify-center" data-icon="House" data-size="24px" data-weight="fill">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                <path
                  d="M224,115.55V208a16,16,0,0,1-16,16H168a16,16,0,0,1-16-16V168a8,8,0,0,0-8-8H112a8,8,0,0,0-8,8v40a16,16,0,0,1-16,16H48a16,16,0,0,1-16-16V115.55a16,16,0,0,1,5.17-11.78l80-75.48.11-.11a16,16,0,0,1,21.53,0,1.14,1.14,0,0,0,.11.11l80,75.48A16,16,0,0,1,224,115.55Z"
                ></path>
              </svg>
            </div>
          </a>
          <a class="just flex flex-1 flex-col items-center justify-end gap-1 text-[#81766a]" href="#">
            <div class="text-[#81766a] flex h-8 items-center justify-center" data-icon="MagnifyingGlass" data-size="24px" data-weight="regular">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
              </svg>
            </div>
          </a>
          <a class="just flex flex-1 flex-col items-center justify-end gap-1 text-[#81766a]" href="upload.html">
            <div class="text-[#81766a] flex h-8 items-center justify-center" data-icon="Plus" data-size="24px" data-weight="regular">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M224,128a8,8,0,0,1-8,8H136v80a8,8,0,0,1-16,0V136H40a8,8,0,0,1,0-16h80V40a8,8,0,0,1,16,0v80h80A8,8,0,0,1,224,128Z"></path>
              </svg>
            </div>
          </a>
          <a class="just flex flex-1 flex-col items-center justify-end gap-1 text-[#81766a]" href="#">
            <div class="text-[#81766a] flex h-8 items-center justify-center" data-icon="Tray" data-size="24px" data-weight="regular">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                <path
                  d="M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32Zm0,16V152h-28.7A15.86,15.86,0,0,0,168,156.69L148.69,176H107.31L88,156.69A15.86,15.86,0,0,0,76.69,152H48V48Zm0,160H48V168H76.69L96,187.31A15.86,15.86,0,0,0,107.31,192h41.38A15.86,15.86,0,0,0,160,187.31L179.31,168H208v40Z"
                ></path>
              </svg>
            </div>
          </a>
          <a class="just flex flex-1 flex-col items-center justify-end gap-1 text-[#81766a]" href="#">
            <div class="text-[#81766a] flex h-8 items-center justify-center" data-icon="User" data-size="24px" data-weight="regular">
              <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                <path
                  d="M230.92,212c-15.23-26.33-38.7-45.21-66.09-54.16a72,72,0,1,0-73.66,0C63.78,166.78,40.31,185.66,25.08,212a8,8,0,1,0,13.85,8c18.84-32.56,52.14-52,89.07-52s70.23,19.44,89.07,52a8,8,0,1,0,13.85-8ZM72,96a56,56,0,1,1,56,56A56.06,56.06,0,0,1,72,96Z"
                ></path>
              </svg>
            </div>
          </a>
        </div>
        <div class="h-5 bg-white"></div>
      </div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // ---- Start of existing comment visibility logic ----
        const loggedInUser = localStorage.getItem('loggedInUser');
        const commentInputSection = document.getElementById('comment-input-section');
        const commentsHeader = document.getElementById('comments-header');
        const commentsList = document.getElementById('comments-list');

        if (!loggedInUser) {
          if (commentInputSection) commentInputSection.style.display = 'none';
          if (commentsHeader) commentsHeader.style.display = 'none';
          if (commentsList) commentsList.style.display = 'none';
        }
        // ---- End of existing comment visibility logic ----

        // ---- Start of new dynamic image detail logic ----
        const imageDetailTitle = document.getElementById('imageDetailTitle');
        const mainImageDisplay = document.getElementById('mainImageDisplay');
        const defaultImageUrl = 'https://placekitten.com/600/400'; // A default if image not found

        // Get image ID from URL parameter
        const urlParams = new URLSearchParams(window.location.search);
        const imageId = urlParams.get('image');

        if (!imageId) {
          console.warn('No image ID found in URL.');
          if (imageDetailTitle) imageDetailTitle.textContent = 'Image Not Found';
          if (mainImageDisplay) mainImageDisplay.style.backgroundImage = `url('${defaultImageUrl}')`;
          // Hide comment section as well if no image is loaded
          if (commentInputSection) commentInputSection.style.display = 'none';
          if (commentsHeader) commentsHeader.style.display = 'none';
          if (commentsList) commentsList.style.display = 'none';
          return;
        }

        fetch('/image_data.json') // Assuming image_data.json is at the root
          .then(response => {
            if (!response.ok) {
              // Try to get more info for non-OK responses
              return response.text().then(text => {
                throw new Error(`Failed to load image_data.json: ${response.status} ${response.statusText}. Body: ${text}`);
              });
            }
            return response.json();
          })
          .then(data => {
            if (!data.images || !Array.isArray(data.images)) {
              throw new Error('Invalid image data format from image_data.json.');
            }

            const image = data.images.find(img => img.id === imageId);

            if (image) {
              if (imageDetailTitle) imageDetailTitle.textContent = image.title || 'Untitled Detail';
              if (mainImageDisplay) mainImageDisplay.style.backgroundImage = `url('${image.displayUrl || defaultImageUrl}')`;
              // Update document title
              document.title = image.title ? `${image.title} - Catstagram Detail` : 'Catstagram Detail';
            } else {
              console.warn(`Image with ID '${imageId}' not found.`);
              if (imageDetailTitle) imageDetailTitle.textContent = 'Image Not Found';
              if (mainImageDisplay) mainImageDisplay.style.backgroundImage = `url('${defaultImageUrl}')`;
              document.title = 'Image Not Found - Catstagram';
              // Hide comment section as well if image not found
              if (commentInputSection) commentInputSection.style.display = 'none';
              if (commentsHeader) commentsHeader.style.display = 'none';
              if (commentsList) commentsList.style.display = 'none';
            }
          })
          .catch(error => {
            console.error('Error loading image details:', error);
            if (imageDetailTitle) imageDetailTitle.textContent = 'Error Loading Image';
            if (mainImageDisplay) mainImageDisplay.style.backgroundImage = `url('${defaultImageUrl}')`;
            document.title = 'Error Loading Image - Catstagram';
            // Hide comment section on error too
            if (commentInputSection) commentInputSection.style.display = 'none';
            if (commentsHeader) commentsHeader.style.display = 'none';
            if (commentsList) commentsList.style.display = 'none';
          });
        // ---- End of new dynamic image detail logic ----
      });
    </script>
  </body>
</html>
